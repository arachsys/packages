require go

check() {
  url https://github.com/filosottile/age/tags
  match version 1.2.1 'tags/v([0-9.]+)\.tar'
}

prepare() {
  unpack age-1.2.1.tar.gz \
    https://github.com/filosottile/age/archive/refs/tags/v1.2.1.tar.gz
  go mod vendor
  tree 655ef929686a1829f912d8c481abae20e463cfcafdb204d219406f0726190421
}

build() {
  go build -C cmd/age
  go build -C cmd/age-keygen
  install -t /dst/bin -D cmd/age/age cmd/age-keygen/age-keygen
}
