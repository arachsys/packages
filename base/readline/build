mode autotools

prepare() {
  unpack https://ftp.gnu.org/gnu/readline/readline-8.1.tar.gz
  # set https://ftp.gnu.org/gnu/readline/readline-8.0-patches/readline80-{001..004}
  # while [[ $# -gt 0 ]]; do
  #   apply -p 0 readline-8.0.${1##*-*(0)}.patch $1
  #   shift
  # done
  tree 158a94a252e8d331e022acc5a6b054632852c533fdd4d2e161aee577b656960b
}

config-extra --disable-install-examples
compile-extra SHLIB_LIBS=-lncurses

post-config() {
  # In the absence of working configure support for --disable-rpath:
  sed -e 's/ -Wl,-rpath,\$(libdir) / /' -i $SRC/shlib/Makefile
}
