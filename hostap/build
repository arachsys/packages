require libnl-tiny

check() {
  url https://w1.fi/cgit/hostap/refs/
  match version 2.10 'hostap_([0-9]+)_([0-9]+)\.tar' '\1.\2'
}

prepare() {
  unpack hostap-20240529.tar.gz \
    https://w1.fi/cgit/hostap/snapshot/hostap-e4e91f53.tar.gz
  apply libnl.diff
  apply tidy.diff
  tree cb7a4d468ea1c04c6976eb8ed9e12f9cfa61e168ab998057f8edb33507f40506
}

build() {
  cp /pkg/config.hostapd hostapd/.config
  make -C hostapd hostapd
  install -s -D hostapd/hostapd /dst/bin/hostapd

  cp /pkg/config.wpad wpa_supplicant/.config
  make -C wpa_supplicant wpa_supplicant
  install -s -D wpa_supplicant/wpa_supplicant /dst/bin/wpad
}
