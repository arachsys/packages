mode autotools

check() {
  url https://github.com/ipmitool/ipmitool/releases
  match version 1.8.18 'ipmitool-([0-9.]+)\.tar'
}

prepare() {
  unpack https://github.com/ipmitool/ipmitool/releases/download/IPMITOOL_1_8_18/ipmitool-1.8.18.tar.bz2
  apply libressl.diff
  apply nocommon.diff
  apply overflows.diff
  apply solhelp.diff
  tree 8c0d36a324a3f4d70980d72bdd758ead8c814db970bad09ed2084f10d5229a9c
}

config-extra --disable-intf-{bmc,free,imb,lipmi,lan,serial}

post-install() {
  rm -f -r /dst/bin/ipmievd /dst/lib/ipmitool /dst/lib/man/*/ipmievd.*
}
