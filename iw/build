require bison flex libnl-tiny

check() {
  url https://mirrors.edge.kernel.org/pub/software/network/iw/
  match iw 5.19 'iw-([0-9.]+)\.tar'
}

prepare() {
  unpack https://mirrors.edge.kernel.org/pub/software/network/iw/iw-5.19.tar.xz
  apply paths.diff
  tree 01ef9fc227ad9c5828c26386189e8a9ca306ab8522b2631138d4cc868cd9d22d
}

build() {
  make DESTDIR=/dst PREFIX= SBINDIR=/bin MANDIR=/lib/man NO_PKG_CONFIG=1 \
    CFLAGS="-Os ${CFLAGS} -D_GNU_SOURCE -DCONFIG_LIBNL30" \
    LIBS="-Wl,-Bstatic -lnl-tiny -Wl,-Bdynamic" install
}
