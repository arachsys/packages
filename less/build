mode autotools

check() {
  url http://www.greenwoodsoftware.com/less/download.html
  match version 635 'less-([0-9.]+)(-beta)?\.tar'
}

prepare() {
  unpack http://www.greenwoodsoftware.com/less/less-635-beta.tar.gz
  tree 7995ca0c58e89a81779a2755a51cfb3b59b86cfaa1e1c9c0ab60c40f5f35f02f
}

config-extra --with-regex=pcre2

post-config() {
  sed -i '/#define LESSHISTFILE/s/".*"/"-"/' defines.h
}

post-install() {
  rm -f /dst/bin/lesskey /dst/lib/man/man1/lesskey.1
  ln -s less /dst/bin/more
}
