mode autotools

check() {
  url https://www.libarchive.org/downloads/
  match version 3.6.1 'libarchive-([0-9.]+)\.tar'
}

prepare() {
  unpack https://www.libarchive.org/downloads/libarchive-3.6.1.tar.xz
  tree f6c45221417e84e00a28fcd0133ac19028113214c15f5b8b76eb4bd8b5a3be54
}

config-extra --disable-acl --enable-bsd{cat,cpio,tar}=dynamic \
  --enable-xattr --without-{expat,xml2} --with-{bz2lib,lzma,zlib,zstd}

post-install() {
  mv /dst/bin/{bsdcpio,cpio}
  mv /dst/bin/{bsdtar,tar}
}
