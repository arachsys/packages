check() {
  url https://git.openwrt.org/project/libnl-tiny.git
  match version 2023-01-06 '([0-9]{4}-[0-9]{2}-[0-9]{2})'
}

prepare() {
  unpack libnl-tiny-2023-01-06.tar.gz \
    'https://git.openwrt.org/?p=project/libnl-tiny.git;a=snapshot;h=f5d9b7e4;sf=tgz'
  tree bca31f2b7c8e41b6e877509f62f8b1e4459a2a33effbd17b6c2b50bc726026e2
}

build() {
  mkdir -p /dst/lib/shared /dst/lib/static
  cp -r include /dst/lib/include

  cc -c -fpic -Iinclude -Os *.c
  cc -shared -Wl,-Bsymbolic-functions -o /dst/lib/shared/libnl-tiny.so.1 *.o
  ln -s libnl-tiny.so.1 /dst/lib/shared/libnl-tiny.so
  ar rcs /dst/lib/static/libnl-tiny.a *.o
}
