check() {
  url https://api.github.com/repos/openwrt/libnl-tiny/branches/master
  match version 2025-11-14 '"date": *"([0-9]{4}-[0-9]{2}-[0-9]{2})'
}

prepare() {
  unpack libnl-tiny-2025-11-14.tar.gz \
    https://github.com/openwrt/libnl-tiny/archive/2871f3f2.tar.gz
  tree 97ced31c86bd9ed2b7c826d9911af61a7217d6b07b7e29490cad73c93bb55a8d
}

build() {
  mkdir -p /dst/lib/shared /dst/lib/static
  cp -r include /dst/lib/include

  cc -c -fpic -Iinclude -Os *.c
  cc -shared -Wl,-Bsymbolic-functions -o /dst/lib/shared/libnl-tiny.so.1 *.o
  ln -s libnl-tiny.so.1 /dst/lib/shared/libnl-tiny.so
  ar rcs /dst/lib/static/libnl-tiny.a *.o
}
