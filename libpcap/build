require bison flex libnl-tiny

check() {
  url https://www.tcpdump.org/release/
  match version 1.10.6 'libpcap-([0-9.]+)\.tar'
}

prepare() {
  unpack https://www.tcpdump.org/release/libpcap-1.10.6.tar.gz
  apply libnl.diff
  tree 7f4c160338b3b65569006f4acc7d12cf630494fd02cf1a35879fe6d6fb13939c
}

build() {
  auto-config --with-libnl --with-pcap=linux
  sed -i 's/-lnl-tiny/-l:libnl-tiny.a/g' **/Makefile
  make install DESTDIR=/dst
  rm -f /dst/bin/pcap-config
}
