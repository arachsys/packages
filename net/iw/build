require bison
require flex
require m4

prepare() {
  unpack https://mirrors.edge.kernel.org/pub/software/network/iw/iw-5.9.tar.xz
  unpack -d libnl http://www.infradead.org/~tgr/libnl/files/libnl-3.2.25.tar.gz
  tree a78ac98a12d7ed2eee92131498571ffdf3637280eac942d261418e29109977d3
}

build() {
  cd libnl
  $SRC/libnl/configure --prefix=$SRC/libs --disable-shared
  make install
  cd $SRC

  make DESTDIR=$DST PREFIX= SBINDIR=/bin MANDIR=/lib/man NO_PKG_CONFIG=1 \
    CFLAGS="-Os ${CFLAGS} -DCONFIG_LIBNL30 -I$SRC/libs/include/libnl3" \
    LIBS="-L$SRC/libs/lib -lnl-genl-3 -lnl-3" install
}
