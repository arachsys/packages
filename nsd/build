mode autotools
require libevent

check() {
  url https://www.nlnetlabs.nl/downloads/nsd/
  match version 4.7.0 'nsd-([0-9.]+)\.tar'
}

prepare() {
  unpack https://www.nlnetlabs.nl/downloads/nsd/nsd-4.7.0.tar.gz
  tree f8968a143b9efcc9f18fc4f8765121c5881d9861b52377cf8fe26351e15749d0
}

config-extra --enable-root-server --with-dbfile=/var/lib/nsd/nsd.db \
  --with-libevent=/lib --with-pidfile=/run/nsd.pid --with-ssl=/lib \
  --with-user=dns --with-xfrdfile=/var/lib/nsd/xfrd.state \
  --with-zonelistfile=/var/lib/nsd/zone.list
