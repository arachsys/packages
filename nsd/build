mode autotools
require libevent

check() {
  url https://www.nlnetlabs.nl/downloads/nsd/
  match version 4.5.0 'nsd-([0-9.]+)\.tar'
}

prepare() {
  unpack https://www.nlnetlabs.nl/downloads/nsd/nsd-4.5.0.tar.gz
  tree 103a9cddb7f3ed7f1e30e09b1baa8036f78ff628a55f1de4237bae796a9b525d
}

config-extra --enable-root-server --with-dbfile=/var/lib/nsd/nsd.db \
  --with-libevent=/lib --with-pidfile=/run/nsd.pid --with-ssl=/lib \
  --with-user=dns --with-xfrdfile=/var/lib/nsd/xfrd.state \
  --with-zonelistfile=/var/lib/nsd/zone.list
