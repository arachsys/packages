check() {
  url https://sourceforge.net/projects/procps-ng/files/Production/
  match version 4.0.3 'procps-ng-([0-9.]+)\.tar'
}

prepare() {
  unpack https://downloads.sourceforge.net/project/procps-ng/Production/procps-ng-4.0.3.tar.xz
  apply cosmetic.diff
  apply musl.diff
  apply pidns.diff
  tree befb4826c3ce2c76501b7ab694376ab99c697ed4ed4b00dfa667ef8acb83231c
}

build() {
  auto-config --disable-{kill,modern-top,shared} --enable-watch8bit \
    NCURSES_CFLAGS= NCURSES_LIBS=-lncursesw PKG_CONFIG=/bin/true
  make install DESTDIR=/dst
  rm -f -r /dst/bin/w /dst/lib/{include,lib*.a,man/man1/w.1,pkgconfig}
}
