mode autotools

check() {
  url https://git.savannah.gnu.org/cgit/readline.git/log/
  match version 8.1.1 'Readline-([0-9.]+) patch ([0-9]+)' '\1.\2'
}

prepare() {
  unpack https://ftp.gnu.org/gnu/readline/readline-8.1.tar.gz
  set https://ftp.gnu.org/gnu/readline/readline-8.1-patches/readline81-{001..001}
  while [[ $# -gt 0 ]]; do
    apply -p 0 readline-8.1.${1##*-*(0)}.diff $1
    shift
  done
  apply config.diff
  tree 43363519d7ab199b3350bb990a9e17eeab68fa6807538b74b7da9b7005213585
}

config-extra --disable-install-examples
compile-extra SHLIB_LIBS=-lncurses
